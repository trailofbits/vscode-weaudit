#!/bin/sh

# Run ESLint on src/ (fail on warnings too)
echo "Running ESLint..."
npm run lint -- --max-warnings 0
if [ $? -ne 0 ]; then
    echo "ESLint failed. Please fix the errors before committing."
    exit 1
fi

# Run Prettier check
echo "Checking Prettier formatting..."
npx prettier --check .
if [ $? -ne 0 ]; then
    echo "Prettier check failed. Run 'npm run prettier' to fix formatting."
    exit 1
fi

# Run unit tests
echo "Running unit tests..."
npm run test:unit
if [ $? -ne 0 ]; then
    echo "Unit tests failed. Please fix the failing tests before committing."
    exit 1
fi

echo "Pre-commit checks passed!"
